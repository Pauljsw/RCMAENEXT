# CLASS_NAMES: ['dumptruck', 'excavator', 'grader', 'roller']

# DATA_CONFIG:
#     _BASE_CONFIG_: cfgs/dataset_configs/custom_dataset_isarc.yaml
    
#     DATA_AUGMENTOR:
#         DISABLE_AUG_LIST: ['gt_sampling']
#         AUG_CONFIG_LIST:
#             - NAME: random_world_flip
#               ALONG_AXIS_LIST: ['x']
#             - NAME: random_world_scaling
#               WORLD_SCALE_RANGE: [0.98, 1.02]

# MODEL:
#     NAME: RMAEVoxelNeXt
    
#     VFE:
#         NAME: MeanVFE

#     BACKBONE_3D:
#         NAME: RadialMAEVoxelNeXt  # β… μ¬λ°”λ¥΄κ² λ“±λ΅λ μ΄λ¦„ μ‚¬μ©
#         MASKED_RATIO: 0.8
#         ANGULAR_RANGE: 1
#         PRETRAINING: True

#     # DENSE_HEAD μ„Ήμ… μ™„μ „ μ κ±° (pretrainingμ—μ„λ” λ¶ν•„μ”)

#     POST_PROCESSING:
#         RECALL_THRESH_LIST: [0.3, 0.5, 0.7]
#         EVAL_METRIC: kitti

# OPTIMIZATION:
#     BATCH_SIZE_PER_GPU: 16
#     NUM_EPOCHS: 30

#     OPTIMIZER: adam_onecycle
#     LR: 0.001                 # β… Pretrainingμ© λ‚®μ€ ν•™μµλ¥ 
#     WEIGHT_DECAY: 0.01
#     MOMENTUM: 0.9

#     MOMS: [0.95, 0.85]
#     PCT_START: 0.4
#     DIV_FACTOR: 10
#     DECAY_STEP_LIST: [20, 25]  # β… 30 epochμ— λ§κ² μ΅°μ •
#     LR_DECAY: 0.1
#     LR_CLIP: 0.0000001

#     LR_WARMUP: False
#     WARMUP_EPOCH: 1

#     GRAD_NORM_CLIP: 10


CLASS_NAMES: ['dumptruck', 'excavator', 'grader', 'roller']

DATA_CONFIG:
    _BASE_CONFIG_: cfgs/dataset_configs/custom_dataset_isarc.yaml
    
    DATA_AUGMENTOR:
        DISABLE_AUG_LIST: ['gt_sampling']
        AUG_CONFIG_LIST:
            - NAME: random_world_flip
              ALONG_AXIS_LIST: ['x']
            - NAME: random_world_scaling
              WORLD_SCALE_RANGE: [0.98, 1.02]

MODEL:
    NAME: RMAEVoxelNeXt
    
    # ===== π“„ R-MAE λ…Όλ¬Έ Enhanced Loss νλΌλ―Έν„° =====
    OCCUPANCY_WEIGHT: 1.0
    CONSISTENCY_WEIGHT: 0.3
    
    # Distance-aware loss weighting (λ…Όλ¬Έ κΈ°λ°)
    USE_DISTANCE_WEIGHTING: True
    DISTANCE_LOSS_WEIGHTS:
        NEAR: 1.5   # κ°€κΉμ΄ κ±°λ¦¬: λ†’μ€ κ°€μ¤‘μΉ (μ¤‘μ”ν• μ„Έλ¶€μ‚¬ν•­)
        MID: 1.0    # μ¤‘κ°„ κ±°λ¦¬: ν‘μ¤€ κ°€μ¤‘μΉ
        FAR: 0.7    # λ¨Ό κ±°λ¦¬: λ‚®μ€ κ°€μ¤‘μΉ (λ…Έμ΄μ¦ λ§μ)
    
    # Focal loss for class imbalance (μ„ νƒμ‚¬ν•­)
    USE_FOCAL_LOSS: False
    FOCAL_ALPHA: 0.25
    FOCAL_GAMMA: 2.0
    
    # Hard negative mining (μ„ νƒμ‚¬ν•­)  
    USE_HARD_NEGATIVE_MINING: False
    
    VFE:
        NAME: MeanVFE

    BACKBONE_3D:
        NAME: RadialMAEVoxelNeXt
        PRETRAINING: True
        
        # ===== π“„ R-MAE λ…Όλ¬Έ μ •ν™•ν• νλΌλ―Έν„° =====
        # κΈ°λ³Έ masking
        MASKED_RATIO: 0.8
        
        # Stage 1: Angular Group Selection
        NUM_ANGULAR_GROUPS: 36          # Ng = 36 groups
        ANGULAR_GROUP_SIZE: 10          # Ξ”ΞΈ = 10 degrees (360/36)
        
        # Stage 2: Range-Aware Masking within Selected Groups
        DISTANCE_THRESHOLDS: [20, 40, 60]    # rt1, rt2, rt3 (meters)
        RANGE_MASK_PROBS:                    # pmj,k values
            NEAR: 0.56      # 0.8 * 0.7 = κ°€κΉμ΄ κ±°λ¦¬ λ‚®μ€ masking
            MID: 0.80       # ν‘μ¤€ masking ratio
            FAR: 1.0        # min(1.0, 0.8 * 1.3) = λ¨Ό κ±°λ¦¬ λ†’μ€ masking
        
        # λ…Όλ¬Έ κµ¬ν„ μµμ…
        USE_BERNOULLI_MASKING: True     # Bernoulli distribution μ‚¬μ©
        ENABLE_2STAGE_MASKING: True     # 2-Stage masking ν™μ„±ν™”

    # DENSE_HEAD μ„Ήμ… μ™„μ „ μ κ±° (pretrainingμ—μ„λ” λ¶ν•„μ”)

    POST_PROCESSING:
        RECALL_THRESH_LIST: [0.3, 0.5, 0.7]
        EVAL_METRIC: kitti

OPTIMIZATION:
    BATCH_SIZE_PER_GPU: 16
    NUM_EPOCHS: 30

    OPTIMIZER: adam_onecycle
    LR: 0.001                 # β… Pretrainingμ© λ‚®μ€ ν•™μµλ¥ 
    WEIGHT_DECAY: 0.01
    MOMENTUM: 0.9

    MOMS: [0.95, 0.85]
    PCT_START: 0.4
    DIV_FACTOR: 10
    DECAY_STEP_LIST: [20, 25]  # β… 30 epochμ— λ§κ² μ΅°μ •
    LR_DECAY: 0.1
    LR_CLIP: 0.0000001

    LR_WARMUP: False
    WARMUP_EPOCH: 1

    GRAD_NORM_CLIP: 10